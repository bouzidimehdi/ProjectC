@page
@model WebApplication1.Pages.ShoppingCartModel
@{

    float total = 0;
}
<!--<h2>ShoppingCart</h2>-->

<div class="container">
    <div class="row" >
        <div class="col">
        <h2 style="font-family: 'Rubik', sans-serif; font-weight:900;">CART <i class="fas fa-shopping-cart"></i></h2></div>
        <div class="col">
            <a class="btn btn-warning float-right" style="margin-top:10px; margin-bottom:10px; padding-left:15px;" asp-page="./Shopping" id="Cart_ToShopping">Continue Shopping</a>
        </div>
         <table class="table">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Subtotal</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model._Products)
                {
                    total = total += (item.product.PriceFinal * item.quantity);

                <tr>
                    <td> <img src="@item.product.HeaderImage" style="width:170px; height:90px;" alt="No Image" />
                    @item.product.ResponseName</td>
                    <td> € @item.product.PriceFinal</td>
                    <td>
                        @{ if (Model.YourCart != null)
                            {
                                <form asp-page="deleteproduct" method="post" class="d-inline align-middle ">
                                    <input type="hidden" name="id" value="@item.product.ID" />
                                    <input type="hidden" name="cartid" value="@Model.YourCart.ID" />
                                    <input type="submit" value="-" class="btn btn-light btn-sm" id="Cart_Decrease_Quantity"/>
                                </form>
                                <span style="padding:1px 10px"> @item.quantity</span>
                                <form asp-page="ShoppingCartController" method="post" class="d-inline align-middle  ">
                                    <input type="hidden" name="productid" value="@item.product.ID" />
                                    <input type="submit" value="+" class="btn btn-light btn-sm" id="Cart_Add_Quantity"/>
                                    
                                </form>
                            }
                            else
                            {
                               <form asp-page="deleteproduct" method="post" class="d-inline align-middle ">
                                   <input type="hidden" name="id" value="@item.product.ID" />
                                   <input type="submit" value="-" class="btn btn-light btn-sm" id="Cart_Decrease_QuantityCookie" />
                               </form>
                               <span style="padding:1px 10px"> @item.quantity</span>
                               <form asp-page="ShoppingCartController" method="post" class="d-inline align-middle  ">
                                   <input type="hidden" name="productid" value="@item.product.ID" />
                                   <input type="submit" value="+" class="btn btn-light btn-sm" id="Cart_Add_QuantityCookie"/>
                                    
                               </form>
                            }
                        }
                    </td>
                    <td>
                        € @(item.product.PriceFinal * item.quantity)
                    </td>
                    <td>
                        @{if (Model.YourCart != null)
                            {
                                <form asp-page="deleteproduct" method="post" asp-page-handler="Deleteitem" id="OneTimeClick">
                                    <input type="hidden" name="id1" value="@item.product.ID" />
                                    <input type="hidden" name="cartid1" value="@Model.YourCart.ID" />
                                    <!--<input type="submit" value="Delete from cart" class="btn-danger">-->
                                    <button  type="submit" id="DeleteProductUser" class="close float-lg-left" title="Remove this product" aria-label="Close" onclick="this.disabled = true;this.form.submit()"><span aria-hidden="true">&times;</span></button>
                                </form>
                            }
                            else
                            {
                              <form asp-page="deleteproduct" method="post" asp-page-handler="Deleteitem">
                                  <input type="hidden" name="id1" value="@item.product.ID" />
                                  <!--<input type="submit" value="Delete from cart" class="btn-danger">-->
                                  <button type="submit" id="Cart_DeleteProductCookie"class="close float-lg-left" title="Remove this product" aria-label="Close" onclick="this.disabled = true;this.form.submit()"><span aria-hidden="true">&times;</span></button>
                              </form>
                            }
                        }
                    </td>
                </tr>
                            }
             </tbody>
        </table>
    </div>
    <br /><br />
           
          <div class="row">
              <div class="col-md-6">
                  <h2 style="font-family: 'Rubik', sans-serif; font-weight:900;">
                      Enter your Coupon Code here!<br /> and receive a discount</h2>
                      <input type="text" placeholder="Enter your code here!" style="border-radius:6px;" />
              </div>

              <div class="col-md-6" style="padding-bottom: 10px">
                  <h2 style="font-family: 'Rubik', sans-serif; font-weight:900;">CART TOTALS</h2>
                  <table class="table">
                      <tbody>
                          <tr>
                              <th>Sub Total</th>
                              <td> € @total</td>
                          </tr>
                          <tr>
                              <th> Discount:  </th>
                              <td> € 5</td>
                          </tr>
                          <tr>
                              <th>Total</th>
                              <td> € @(total-5)</td>
                         </tr>
                      </tbody>

                  </table>
                  <div class="row" style="float:right; padding-right:15px;">
                      @if (Model._Products.Count > 0)
                      {
                          <form asp-page="deleteproduct" method="post" asp-page-handler="Deletecart">
                              <input type="submit" value="Clear Cart" class="btn btn-danger" id="Cart_Clear_Cart" onkeypress="hidediv()" />&nbsp;&nbsp;
                              @*<input type="submit" value="delete the whole cart" />*@
                          </form>
                          <a class="btn btn-primary float-right" asp-page="Checkout" id="Cart_Checkout">Proceed to Checkout</a>
                      }
                  </div>

              </div>
          </div>
</div>



<style>
    .container  {
        margin-top: 1.5em;
    }
    .border     {
        border-width: 1px !important
    }
</style>